
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>April 2022 Update &#8212; Velox  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/nature.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="March 2022 Update" href="march-2022.html" />
    <link rel="prev" title="May 2022 Update" href="may-2022.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="march-2022.html" title="March 2022 Update"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="may-2022.html" title="May 2022 Update"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Velox  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../monthly-updates.html" >Monthly Updates</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2022</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">April 2022 Update</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="april-2022-update">
<h1>April 2022 Update<a class="headerlink" href="#april-2022-update" title="Permalink to this heading">¶</a></h1>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Add <a class="reference internal" href="../../develop/task.html"><span class="doc">What’s in the Task?</span></a> documentation article.</p></li>
<li><p>Document <a class="reference external" href="https://github.com/facebookincubator/velox/blob/main/velox/exec/TaskDriverOperatorLifecycle.md">lifecycle of Tasks, Drivers and Operators</a>.</p></li>
<li><p>Document <a class="reference internal" href="../../develop/debugging/print-expr-with-stats.html"><span class="doc">printExprWithStats</span></a> debugging tool.</p></li>
</ul>
</section>
<section id="core-library">
<h2>Core Library<a class="headerlink" href="#core-library" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Add support for UNNEST for multiple columns.</p></li>
<li><p>Add support for running final group-by aggregations using multiple threads.</p></li>
<li><p>Add <a class="reference external" href="https://github.com/xtensor-stack/xsimd">xsimd</a> dependency. <a class="reference external" href="https://github.com/facebookincubator/velox/pull/1405">#1405</a></p></li>
<li><p>Upgrade folly to 2022.03.14.00 (from 2021.05.10.00).</p></li>
<li><p>Upgrade fmt to 8.0.0 (from 7.1.3).</p></li>
<li><p>Optimize MergeJoin operator by removing unnecessary copying of std::shared_ptr.</p></li>
<li><p>Optimize LocalMerge operator. <a class="reference external" href="https://github.com/facebookincubator/velox/pull/1318">#1318</a></p></li>
<li><p>Fix coalesce Presto function to avoid evaluating arguments that are not needed by replacing it with a build-in special form. <a class="reference external" href="https://github.com/facebookincubator/velox/pull/1430">#1430</a></p></li>
<li><p>Fix DISTINCT + LIMIT queries. <a class="reference external" href="https://github.com/facebookincubator/velox/pull/1390">#1390</a></p></li>
</ul>
</section>
<section id="presto-functions">
<h2>Presto Functions<a class="headerlink" href="#presto-functions" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Re-implement <a class="reference internal" href="../../functions/presto/aggregate.html#approx_percentile" title="approx_percentile"><code class="xref py py-func docutils literal notranslate"><span class="pre">approx_percentile()</span></code></a> aggregate function using KLL sketch instead of T-Digest and add support for accuracy parameter.</p></li>
</ul>
</section>
<section id="performance-and-correctness-testing">
<h2>Performance and Correctness Testing<a class="headerlink" href="#performance-and-correctness-testing" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Add support for TPC-H data generation through dbgen integration. Support for TPC-H connector is coming soon.</p></li>
<li><p>Add q13 to TPC-H benchmark.</p></li>
<li><p>Add AggregationTestBase::testAggregations helper method to test a variety of logically equivalent plans to compute aggregations using combinations of partial, final, single, and intermediate aggregations with and without local exchanges to simplify testing of individual aggregate function with better coverage. <a class="reference external" href="https://github.com/facebookincubator/velox/pull/1476">#1476</a></p></li>
<li><p>Add support for ORDER BY SQL clauses to PlanBuilder::topN() and PlanBuilder::mergeExchange().</p></li>
<li><p>Add support for specifying range and remaining filters using SQL in PlanBuilder::tableScan().</p></li>
<li><p>Simplify PlanBuilder::xxxAggregation() and PlanBuilder::partitionedOutput() APIs by taking grouping and partitioning keys by name.</p></li>
<li><p>Upgrade GTest submodule to 1.11 (from 1.10).</p></li>
</ul>
</section>
<section id="debugging-experience">
<h2>Debugging Experience<a class="headerlink" href="#debugging-experience" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Add support for collecting runtime statistics for individual expressions.</p></li>
<li><p>Add printExprWithStats function to print expression tree annotated with runtime statistics. <a class="reference external" href="https://github.com/facebookincubator/velox/pull/1425">#1425</a></p></li>
<li><p>Add number of splits and threads to printPlanWithStats output.</p></li>
<li><p>Add filters pushed down into table scan to printPlanWithStats output.</p></li>
<li><p>Add a mechanism to register a listener that is called upon task completion and receives task completion status, error details and runtime statistics. <a class="reference external" href="https://github.com/facebookincubator/velox/pull/1404">#1404</a></p></li>
<li><p>Add a mechanism to register a listener that is called on destruction of ExprSet and receives runtime statistics. <a class="reference external" href="https://github.com/facebookincubator/velox/pull/1428">#1428</a></p></li>
</ul>
</section>
<section id="credits">
<h2>Credits<a class="headerlink" href="#credits" title="Permalink to this heading">¶</a></h2>
<p>Alexey Spiridonov, Andrii Vasylevskyi, Carlos Torres, David Greenberg, Deepak
Majeti, Ge Gao, Huameng Jiang, James Xu, Jialiang Tan, Jimmy Lu, Jon Janzen,
Jun Wu, Katie Mancini, Kevin Wilfong, Krishna Pai, Laith Sakka, Li Yazhou,
MJ Deng, Masha Basmanova, Orri Erling, Pedro Eugenio Rocha Pedreira, Pyre Bot Jr,
Richard Barnes, Sergey Pershin, Victor Zverovich, Wei He, Wenlei Xie, Xiang Xu,
Zeyi (Rice) Fan, qiaoyi.dingqy</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">April 2022 Update</a><ul>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#core-library">Core Library</a></li>
<li><a class="reference internal" href="#presto-functions">Presto Functions</a></li>
<li><a class="reference internal" href="#performance-and-correctness-testing">Performance and Correctness Testing</a></li>
<li><a class="reference internal" href="#debugging-experience">Debugging Experience</a></li>
<li><a class="reference internal" href="#credits">Credits</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="may-2022.html"
                          title="previous chapter">May 2022 Update</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="march-2022.html"
                          title="next chapter">March 2022 Update</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/monthly-updates/2022/april-2022.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="march-2022.html" title="March 2022 Update"
             >next</a> |</li>
        <li class="right" >
          <a href="may-2022.html" title="May 2022 Update"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Velox  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../monthly-updates.html" >Monthly Updates</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2022</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">April 2022 Update</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright TBD.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.2.0.
    </div>
  </body>
</html>